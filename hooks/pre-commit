#!/usr/bin/env bash
# pre-commit hook: auto-regenerate releases.md when changelog entries change.
#
# Install: cp hooks/pre-commit .git/hooks/pre-commit
# Or:      git config core.hooksPath hooks

set -euo pipefail

# Only act when changelog files are staged.
if git diff --cached --name-only | grep -q '^seite-sh/content/changelog/'; then
  bash scripts/generate-release-docs.sh
  git add seite-sh/content/docs/releases.md
fi
